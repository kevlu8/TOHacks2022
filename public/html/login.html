<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Log into FriendApp</title>
  <link rel="stylesheet" href="/css/credentials.css" />
  <link rel="shortcut icon" href="res/favicon.ico" type="image/x-icon">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap" rel="stylesheet">
</head>
<body>
  <div id="main">
    <div id="header">
      <div id="links">
        <button class = "menuButton" button id="btn-home" onclick="window.location.href = '/'">Home</button>
        <button class = "menuButton" button id="btn-about" onclick="window.location.href = '/about'">About</button>
        <button class = "menuButton" button id="btn-chat" onclick="window.location.href = '/chat'">Chat</button>
      </div>
      <div id="buttons">
        <button class = "menuButton" button id="btn-login" onclick="window.location.href = '/login'">Login</button>
        <button class = "menuButton" button id="btn-register" onclick="window.location.href = '/register'">Register</button>
      </div>
    </div>
    <div id="flex">
      <form method="POST" action="/api/login">
        <h1><strong>Log in to FriendApp</strong></h1>
        <p class="br">&nbsp;</p>
        <label for="username">Enter your username:</label>
        <input type="username" id="username" name="username" required minlength="1" maxlength="32" size="48" placeholder="Username"/>
        <p class="br">&nbsp;</p>
        <label for="password">Enter your password:</label>
        <input type="password" id="password" name="password" required minlength="1" maxlength="32" size="48" placeholder="Password"/>
        <p class="br">&nbsp;</p>
        <button type="submit" id="submit" name="submit">Submit</button>
        <h5 class="error" id="errorPlaceholder"></h5>
      </form>
    </div>
  </div>
  <script>
    let eph = document.getElementById("errorPlaceholder");
    if (window.location.href.endsWith("?err=0") || window.location.href.endsWith("&err=0")) {
      eph.innerHTML = "Incorrect password!";
      let reqURL = new URL(window.location.href)
      let search = new URLSearchParams(reqURL.search);
      //console.log(search.get("username"))
      document.getElementById("username").value = search.get('username');
    } else if (window.location.href.endsWith("?err=1")) {
      eph.innerHTML = "You must login!";
    } 
  </script>
</body>
</html>